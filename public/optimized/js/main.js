/** * Samsung Life GFC Recruitment Site - Main JavaScript * Version: 2.0.0 * Last Updated: 2026-02-06 * * Bug Fixes & Improvements: * - Enhanced mobile UX with improved dropdown handling * - Strengthened form validation with sanitization * - Better accessibility with keyboard navigation * - Cross-browser compatibility improvements * - Security enhancements (XSS prevention) * - Performance optimizations */ /** * Sanitize user input to prevent XSS attacks * @param {string} input - Raw user input * @returns {string} Sanitized input */ function sanitizeInput(input) { if (typeof input !== 'string') return ''; const div = document.createElement('div'); div.textContent = input; return div.innerHTML .replace(/</g, '&lt;') .replace(/>/g, '&gt;') .replace(/"/g, '&quot;') .replace(/'/g, '&#x27;') .replace(/\ } /** * Debounce function for performance optimization * @param {Function} func - Function to debounce * @param {number} wait - Wait time in milliseconds * @returns {Function} Debounced function */ function debounce(func, wait = 250) { let timeout; return function executedFunction(...args) { const later = () => { clearTimeout(timeout); func(...args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); }; } /** * Check if device is mobile * @returns {boolean} True if mobile device */ function isMobile() { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768; } const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const navMenu = document.querySelector('.nav-menu'); if (mobileMenuToggle && navMenu) { mobileMenuToggle.addEventListener('click', (e) => { e.stopPropagation(); const isActive = navMenu.classList.toggle('active'); const icon = mobileMenuToggle.querySelector('i'); if (icon) { icon.classList.toggle('fa-bars', !isActive); icon.classList.toggle('fa-times', isActive); } mobileMenuToggle.setAttribute('aria-expanded', isActive); mobileMenuToggle.setAttribute('aria-label', isActive ? 'Î©îÎâ¥ Îã´Í∏∞' : 'Î©îÎâ¥ Ïó¥Í∏∞'); document.body.style.overflow = isActive ? 'hidden' : ''; console.log('üì± Mobile menu toggled:', isActive ? 'OPEN' : 'CLOSED'); }); console.log('‚úÖ Mobile menu initialized (outside click DISABLED)'); document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && navMenu.classList.contains('active')) { navMenu.classList.remove('active'); const icon = mobileMenuToggle.querySelector('i'); if (icon) { icon.classList.add('fa-bars'); icon.classList.remove('fa-times'); } mobileMenuToggle.setAttribute('aria-expanded', 'false'); mobileMenuToggle.focus(); document.body.style.overflow = ''; console.log('‚ùå Mobile menu closed (Escape key)'); } }); } const navDropdowns = document.querySelectorAll('.nav-dropdown'); navDropdowns.forEach(dropdown => { const dropdownToggle = dropdown.querySelector('.dropdown-toggle'); const dropdownMenu = dropdown.querySelector('.dropdown-menu'); if (!dropdownToggle || !dropdownMenu) return; dropdownMenu.style.display = 'none'; dropdownMenu.style.maxHeight = '0'; dropdownMenu.style.opacity = '0'; dropdownMenu.style.overflow = 'hidden'; dropdownMenu.style.transition = 'max-height 0.4s ease, opacity 0.4s ease, padding 0.4s ease'; dropdownToggle.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation(); console.log('üîπ Dropdown toggle clicked:', dropdownToggle.textContent.trim()); const isVisible = dropdownMenu.classList.contains('show'); const isMobileMenuOpen = navMenu && navMenu.classList.contains('active'); console.log('üìä Current state:', { isVisible, isMobileMenuOpen }); if (isMobileMenuOpen) { const otherDropdowns = dropdown.parentElement.querySelectorAll('.dropdown-menu.show'); otherDropdowns.forEach(menu => { if (menu !== dropdownMenu) { menu.classList.remove('show'); menu.style.maxHeight = '0'; menu.style.opacity = '0'; menu.style.padding = '0'; setTimeout(() => { if (!menu.classList.contains('show')) { menu.style.display = 'none'; } }, 400); const otherToggle = menu.previousElementSibling; if (otherToggle) { otherToggle.setAttribute('aria-expanded', 'false'); const chevron = otherToggle.querySelector('.fa-chevron-down'); if (chevron) { chevron.style.transform = 'rotate(0deg)'; } } } }); } else { document.querySelectorAll('.dropdown-menu.show').forEach(menu => { if (menu !== dropdownMenu) { menu.classList.remove('show'); const otherToggle = menu.previousElementSibling; if (otherToggle) { otherToggle.setAttribute('aria-expanded', 'false'); } } }); } dropdownMenu.classList.toggle('show', !isVisible); if (!isVisible) { console.log('‚úÖ Opening dropdown'); dropdownMenu.style.display = 'block'; dropdownMenu.style.maxHeight = '600px'; dropdownMenu.style.opacity = '1'; dropdownMenu.style.visibility = 'visible'; dropdownMenu.style.padding = '0.5rem 0'; } else { console.log('‚ùå Closing dropdown'); dropdownMenu.style.maxHeight = '0'; dropdownMenu.style.opacity = '0'; dropdownMenu.style.padding = '0'; setTimeout(() => { if (!dropdownMenu.classList.contains('show')) { dropdownMenu.style.display = 'none'; } }, 400); } dropdownToggle.setAttribute('aria-expanded', !isVisible); const chevron = dropdownToggle.querySelector('.fa-chevron-down'); if (chevron) { chevron.style.transition = 'transform 0.3s ease'; chevron.style.transform = !isVisible ? 'rotate(180deg)' : 'rotate(0deg)'; } }); dropdownMenu.addEventListener('click', function(e) { e.stopPropagation(); }); dropdownMenu.querySelectorAll('a').forEach(link => { link.addEventListener('click', function() { setTimeout(() => { dropdownMenu.classList.remove('show'); dropdownToggle.setAttribute('aria-expanded', 'false'); dropdownMenu.style.maxHeight = '0'; dropdownMenu.style.opacity = '0'; dropdownMenu.style.padding = '0'; setTimeout(() => { dropdownMenu.style.display = 'none'; }, 400); }, 100); }); }); dropdownToggle.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); } }); }); document.addEventListener('click', function(e) { if (!e.target.closest('.nav-dropdown')) { document.querySelectorAll('.dropdown-menu.show').forEach(menu => { menu.classList.remove('show'); const toggle = menu.closest('.nav-dropdown')?.querySelector('.dropdown-toggle'); if (toggle) { toggle.setAttribute('aria-expanded', 'false'); } }); } }); document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { const targetId = this.getAttribute('href'); if (targetId === '#') { e.preventDefault(); return; } const target = document.querySelector(targetId); if (target) { e.preventDefault(); const headerOffset = 80; const elementPosition = target.getBoundingClientRect().top; const offsetPosition = elementPosition + window.pageYOffset - headerOffset; window.scrollTo({ top: offsetPosition, behavior: 'smooth' }); if (navMenu && navMenu.classList.contains('active')) { setTimeout(() => { navMenu.classList.remove('active'); if (mobileMenuToggle) { const icon = mobileMenuToggle.querySelector('i'); if (icon) { icon.classList.add('fa-bars'); icon.classList.remove('fa-times'); } mobileMenuToggle.setAttribute('aria-expanded', 'false'); } document.body.style.overflow = ''; console.log('üì± Mobile menu closed after scroll'); }, 800); } setTimeout(() => { target.setAttribute('tabindex', '-1'); target.focus(); }, 850); } }); }); const scrollTopBtn = document.getElementById('scrollTopBtn'); if (scrollTopBtn) { const handleScroll = debounce(() => { if (window.pageYOffset > 300) { scrollTopBtn.classList.add('show'); } else { scrollTopBtn.classList.remove('show'); } }, 100); window.addEventListener('scroll', handleScroll); window.scrollToTop = function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }; scrollTopBtn.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); window.scrollToTop(); } }); } window.scrollToApply = function() { const applySection = document.getElementById('apply'); if (applySection) { const headerOffset = 80; const elementPosition = applySection.getBoundingClientRect().top; const offsetPosition = elementPosition + window.pageYOffset - headerOffset; window.scrollTo({ top: offsetPosition, behavior: 'smooth' }); setTimeout(() => { const firstInput = applySection.querySelector('input, select, textarea'); if (firstInput) { firstInput.focus(); } }, 500); } }; const tabButtons = document.querySelectorAll('.tab-btn'); const formContents = document.querySelectorAll('.form-content'); tabButtons.forEach(btn => { btn.addEventListener('click', () => { const track = btn.getAttribute('data-track'); tabButtons.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected', 'false'); }); btn.classList.add('active'); btn.setAttribute('aria-selected', 'true'); formContents.forEach(content => { if (content.id === `${track}-content`) { content.classList.remove('hidden'); content.setAttribute('aria-hidden', 'false'); } else { content.classList.add('hidden'); content.setAttribute('aria-hidden', 'true'); } }); }); btn.addEventListener('keydown', function(e) { if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') { e.preventDefault(); const currentIndex = Array.from(tabButtons).indexOf(this); let nextIndex; if (e.key === 'ArrowRight') { nextIndex = (currentIndex + 1) % tabButtons.length; } else { nextIndex = (currentIndex - 1 + tabButtons.length) % tabButtons.length; } tabButtons[nextIndex].click(); tabButtons[nextIndex].focus(); } }); }); window.showJobFairForm = function() { const jobFairTab = document.querySelector('[data-track="jobfair"]'); if (jobFairTab) { jobFairTab.click(); } scrollToApply(); }; window.showReferralForm = function() { const referralTab = document.querySelector('[data-track="referral"]'); if (referralTab) { referralTab.click(); } scrollToApply(); }; const faqItems = document.querySelectorAll('.faq-item'); faqItems.forEach(item => { const question = item.querySelector('.faq-question'); if (!question) return; question.addEventListener('click', () => { const isActive = item.classList.contains('active'); faqItems.forEach(i => { i.classList.remove('active'); const btn = i.querySelector('.faq-question'); if (btn) { btn.setAttribute('aria-expanded', 'false'); } }); if (!isActive) { item.classList.add('active'); question.setAttribute('aria-expanded', 'true'); } }); question.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); } }); }); /** * Enhanced email validation * @param {string} email - Email address to validate * @returns {boolean} True if valid */ function validateEmail(email) { const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; return re.test(String(email).toLowerCase()); } /** * Enhanced phone validation (Korean format) * @param {string} phone - Phone number to validate * @returns {boolean} True if valid */ function validatePhone(phone) { const re = /^01[0-9]-?[0-9]{3,4}-?[0-9]{4}$/; return re.test(phone); } /** * Validate name (Korean or English) * @param {string} name - Name to validate * @returns {boolean} True if valid */ function validateName(name) { const re = /^[Í∞Ä-Ìû£a-zA-Z\s]{2,50}$/; return re.test(name); } /** * Show error message * @param {HTMLElement} input - Input element * @param {string} message - Error message */ function showError(input, message) { removeError(input); input.style.borderColor = '#dc3545'; input.setAttribute('aria-invalid', 'true'); const error = document.createElement('div'); error.className = 'error-message'; error.style.color = '#dc3545'; error.style.fontSize = '0.85rem'; error.style.marginTop = '0.25rem'; error.setAttribute('role', 'alert'); error.textContent = message; const parent = input.parentNode; if (parent.lastChild === input) { parent.appendChild(error); } else { parent.insertBefore(error, input.nextSibling); } } /** * Remove error message * @param {HTMLElement} input - Input element */ function removeError(input) { input.style.borderColor = '#E0E0E0'; input.removeAttribute('aria-invalid'); const parent = input.parentNode; const error = parent.querySelector('.error-message'); if (error) { error.remove(); } } document.querySelectorAll('input[type="email"]').forEach(input => { input.addEventListener('blur', function() { if (this.value) { const sanitized = sanitizeInput(this.value); if (!validateEmail(sanitized)) { showError(this, 'Ïò¨Î∞îÎ•∏ Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); } else { removeError(this); } } else if (this.hasAttribute('required')) { showError(this, 'Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); } else { removeError(this); } }); input.addEventListener('input', function() { if (this.value && validateEmail(this.value)) { removeError(this); } }); }); document.querySelectorAll('input[type="tel"]').forEach(input => { input.addEventListener('input', function() { let value = this.value.replace(/[^0-9]/g, ''); if (value.length > 11) { value = value.slice(0, 11); } if (value.length > 7) { this.value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7); } else if (value.length > 3) { this.value = value.slice(0, 3) + '-' + value.slice(3); } else { this.value = value; } }); input.addEventListener('blur', function() { if (this.value) { if (!validatePhone(this.value)) { showError(this, 'Ïò¨Î∞îÎ•∏ Ï†ÑÌôîÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. (Ïòà: 010-1234-5678)'); } else { removeError(this); } } else if (this.hasAttribute('required')) { showError(this, 'Ï†ÑÌôîÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); } else { removeError(this); } }); input.addEventListener('input', function() { if (this.value && validatePhone(this.value)) { removeError(this); } }); }); document.querySelectorAll('input[name="name"]').forEach(input => { input.addEventListener('blur', function() { if (this.value) { const sanitized = sanitizeInput(this.value); if (!validateName(sanitized)) { showError(this, 'Ïò¨Î∞îÎ•∏ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. (2-50Ïûê, ÌïúÍ∏Ä ÎòêÎäî ÏòÅÎ¨∏)'); } else { removeError(this); } } else if (this.hasAttribute('required')) { showError(this, 'Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); } else { removeError(this); } }); }); const applicationForm = document.getElementById('applicationForm'); if (applicationForm) { applicationForm.addEventListener('submit', async (e) => { e.preventDefault(); let isValid = true; const requiredInputs = applicationForm.querySelectorAll('[required]'); requiredInputs.forEach(input => { if (!input.value.trim()) { showError(input, 'ÌïÑÏàò ÏûÖÎ†• Ìï≠Î™©ÏûÖÎãàÎã§.'); isValid = false; } }); if (!isValid) { alert('ÌïÑÏàò ÏûÖÎ†• Ìï≠Î™©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); return; } const activeForm = document.querySelector('.form-content:not(.hidden)'); if (!activeForm) { console.error('No active form found'); return; } const formData = new FormData(applicationForm); const data = {}; formData.forEach((value, key) => { data[key] = sanitizeInput(value); }); const activeTab = document.querySelector('.tab-btn.active'); data.track = activeTab ? activeTab.getAttribute('data-track') : 'jobfair'; data.submittedAt = new Date().toISOString(); console.log('Form submission data:', data); alert('ÏßÄÏõêÏÑúÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ëÏàòÎêòÏóàÏäµÎãàÎã§!\n\nÎã¥ÎãπÏûêÍ∞Ä ÏòÅÏóÖÏùº Í∏∞Ï§Ä 3Ïùº Ïù¥ÎÇ¥Ïóê Ïó∞ÎùΩÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.\nÍ∞êÏÇ¨Ìï©ÎãàÎã§.'); applicationForm.reset(); document.querySelectorAll('.error-message').forEach(error => error.remove()); document.querySelectorAll('[aria-invalid]').forEach(input => { input.removeAttribute('aria-invalid'); input.style.borderColor = '#E0E0E0'; }); scrollToApply(); }); } const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const intersectionObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.style.opacity = '1'; entry.target.style.transform = 'translateY(0)'; intersectionObserver.unobserve(entry.target); } }); }, observerOptions); document.querySelectorAll('.section').forEach(section => { section.style.opacity = '0'; section.style.transform = 'translateY(30px)'; section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out'; intersectionObserver.observe(section); }); let lastScroll = 0; const header = document.querySelector('.header'); if (header) { const handleHeaderScroll = debounce(() => { const currentScroll = window.pageYOffset; if (currentScroll > 100) { header.style.boxShadow = '0 4px 16px rgba(0, 0, 0, 0.12)'; } else { header.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.08)'; } lastScroll = currentScroll; }, 50); window.addEventListener('scroll', handleHeaderScroll); } function initPressFilter() { const pressFilterButtons = document.querySelectorAll('.press-filter .filter-btn'); const pressCards = document.querySelectorAll('.press-card[data-category]'); console.log('üóûÔ∏è Press Filter Ï¥àÍ∏∞Ìôî:', { buttons: pressFilterButtons.length, cards: pressCards.length }); if (pressFilterButtons.length > 0 && pressCards.length > 0) { pressCards.forEach(card => { card.style.display = 'block'; card.style.opacity = '1'; card.style.transition = 'opacity 0.3s ease, transform 0.3s ease'; }); pressFilterButtons.forEach(btn => { btn.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation(); const filter = this.getAttribute('data-filter'); console.log('üîç ÌïÑÌÑ∞ ÌÅ¥Î¶≠:', filter); pressFilterButtons.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-pressed', 'false'); }); this.classList.add('active'); this.setAttribute('aria-pressed', 'true'); let visibleCount = 0; pressCards.forEach((card, index) => { const category = card.getAttribute('data-category'); const shouldShow = filter === 'all' || category === filter; if (shouldShow) { visibleCount++; card.style.display = 'block'; card.style.opacity = '0'; card.style.transform = 'translateY(20px)'; setTimeout(() => { card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, index * 50); } else { card.style.opacity = '0'; card.style.transform = 'translateY(-20px)'; setTimeout(() => { card.style.display = 'none'; }, 300); } }); console.log('‚úÖ ÌïÑÌÑ∞ Ï†ÅÏö© ÏôÑÎ£å:', visibleCount + 'Í∞ú Ïπ¥Îìú ÌëúÏãú'); }); btn.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); } }); }); console.log('‚úÖ Press Filter Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Îì±Î°ù ÏôÑÎ£å'); } else { console.warn('‚ö†Ô∏è Press Filter ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§'); } } if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', initPressFilter); } else { initPressFilter(); } window.addEventListener('load', () => { if (window.performance && window.performance.timing) { const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart; console.log('Page load time:', loadTime + 'ms'); } }); console.log('%cÏÇºÏÑ±ÏÉùÎ™Ö GFC Ï±ÑÏö© ÏÇ¨Ïù¥Ìä∏', 'color: #034EA2; font-size: 20px; font-weight: bold;'); console.log('%cVersion 2.0.0 - Enhanced with bug fixes and improvements', 'color: #666; font-size: 12px;'); console.log('‚úì Mobile UX improvements'); console.log('‚úì Enhanced form validation'); console.log('‚úì Accessibility improvements'); console.log('‚úì Security enhancements'); console.log('‚úì Performance optimizations'); console.log('Date:', new Date().toLocaleString('ko-KR')); if (!window.IntersectionObserver) { console.warn('IntersectionObserver not supported. Some animations may not work.'); } if (!window.scrollTo) { console.warn('Smooth scrolling not supported.'); } const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); if (isSafari) { document.documentElement.classList.add('safari'); } window.scrollToTop = window.scrollToTop || scrollToTop; window.scrollToApply = scrollToApply; window.showJobFairForm = showJobFairForm; window.showReferralForm = showReferralForm; window.sanitizeInput = sanitizeInput; window.validateEmail = validateEmail; window.validatePhone = validatePhone; window.validateName = validateName; 