!function(){"use strict";console.log("ğŸ–¼ï¸ ì´ë¯¸ì§€ ìµœì í™” ì‹œìŠ¤í…œ ì´ˆê¸°í™”");const e={root:null,rootMargin:"50px",threshold:.01};function o(e){const o=e.dataset.src,t=e.dataset.srcset;(o||t)&&(e.classList.add("loading"),o&&(e.src=o),t&&(e.srcset=t),e.onload=function(){e.classList.remove("loading"),e.classList.add("loaded"),console.log("âœ… ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ:",o||t)},e.onerror=function(){e.classList.remove("loading"),e.classList.add("error"),console.error("âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:",o||t)})}const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target;o(s),t.unobserve(s)}})},e);function s(){const e=document.querySelectorAll("img[data-src], img[data-srcset]");console.log(`ğŸ“¸ ë ˆì´ì§€ ë¡œë”© ëŒ€ìƒ: ${e.length}ê°œ`),e.forEach(e=>{e.classList.contains("loaded")||t.observe(e)})}function n(){const o=document.querySelectorAll("[data-bg]");console.log(`ğŸ¨ ë ˆì´ì§€ ë°°ê²½ ì´ë¯¸ì§€: ${o.length}ê°œ`);const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target,s=o.dataset.bg;o.style.backgroundImage=`url(${s})`,o.classList.add("bg-loaded"),t.unobserve(o),console.log("âœ… ë°°ê²½ ì´ë¯¸ì§€ ë¡œë“œ:",s)}})},e);o.forEach(e=>t.observe(e))}window.createResponsiveImage=function(e){const{src:o,alt:t="",sizes:s="100vw",widths:n=[320,640,960,1280,1920],className:c="",loading:a="lazy"}=e,i=n.map(e=>`${o}?w=${e} ${e}w`).join(", "),r=document.createElement("picture"),l=document.createElement("source");l.type="image/webp",l.srcset=n.map(e=>`${o}?w=${e}&format=webp ${e}w`).join(", "),l.sizes=s,r.appendChild(l);const d=document.createElement("img");return"lazy"===a?(d.dataset.src=o,d.dataset.srcset=i,d.sizes=s):(d.src=o,d.srcset=i,d.sizes=s),d.alt=t,d.className=c,d.loading=a,r.appendChild(d),r};const c=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length&&(s(),n())})});document.body&&c.observe(document.body,{childList:!0,subtree:!0}),function e(){"loading"!==document.readyState?(console.log("ğŸš€ ì´ë¯¸ì§€ ìµœì í™” ì‹œìŠ¤í…œ ì‹œì‘"),function(){if("connection"in navigator){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const o=e.effectiveType;"slow-2g"===o||"2g"===o?(document.documentElement.classList.add("low-quality-images"),console.log("âš ï¸ ëŠë¦° ì—°ê²° ê°ì§€: ë‚®ì€ í’ˆì§ˆ ì´ë¯¸ì§€ ì‚¬ìš©")):"4g"===o&&(document.documentElement.classList.add("high-quality-images"),console.log("âš¡ ë¹ ë¥¸ ì—°ê²° ê°ì§€: ë†’ì€ í’ˆì§ˆ ì´ë¯¸ì§€ ì‚¬ìš©"))}}}(),function(){const e=document.querySelectorAll('img[data-critical="true"]');console.log(`âš¡ ì¤‘ìš” ì´ë¯¸ì§€ ì‚¬ì „ ë¡œë”©: ${e.length}ê°œ`),e.forEach(e=>{const o=e.dataset.src||e.src;if(o){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=o,document.head.appendChild(t),e.dataset.src&&(e.src=e.dataset.src,e.classList.add("loaded"))}})}(),s(),n(),console.log("âœ… ì´ë¯¸ì§€ ìµœì í™” ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ")):document.addEventListener("DOMContentLoaded",e)}(),window.ImageOptimization={observe:s,loadImage:o,createResponsiveImage:window.createResponsiveImage}}();
//# sourceMappingURL=image-optimization.min.js.map