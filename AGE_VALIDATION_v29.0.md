# 🎯 v29.0 지원서 나이 제한 자동 체크 기능

## 📋 개요
**버전**: v29.0  
**날짜**: 2026-02-06  
**목표**: Job Fair 참가, 추천인 지원, 직접 지원 폼에 나이 제한 자동 체크 기능 추가

---

## 🎯 요구사항

사용자 요청:
> "job fair참가 추천인지원 작접지원 모두 지원등록시 나이제한 있으니 체크 할 것"

---

## 📊 2026년 GFC 등록 연령 기준

### 남성 기준
| 상태 | 나이 | 출생년도 | 설명 |
|------|------|----------|------|
| ✅ **적격** | 만 35-60세 | 1966~1991년생 | 지원 가능 + 위촉 가능 |
| ⚠️ **비적격** | 만 30-34세 | 1992~1996년생 | 지원 가능 + 별도 심사 |
| ⚠️ **비적격** | 만 61-65세 | 1961~1965년생 | 지원 가능 + 별도 심사 |
| ❌ **위촉불가** | 만 66세 이상 | 1960년생 이전 | 지원 불가 |
| ❌ **위촉불가** | 만 29세 이하 | 1997년생 이후 | 지원 불가 |

### 여성 기준
| 상태 | 나이 | 출생년도 | 설명 |
|------|------|----------|------|
| ✅ **적격** | 만 30-55세 | 1971~1996년생 | 지원 가능 + 위촉 가능 |
| ⚠️ **비적격** | 만 25-29세 | 1997~2001년생 | 지원 가능 + 별도 심사 |
| ⚠️ **비적격** | 만 56-65세 | 1961~1970년생 | 지원 가능 + 별도 심사 |
| ❌ **위촉불가** | 만 66세 이상 | 1960년생 이전 | 지원 불가 |
| ❌ **위촉불가** | 만 24세 이하 | 2002년생 이후 | 지원 불가 |

---

## ✅ 구현된 기능

### 1. 세 가지 지원 폼에 성별 필드 추가

#### Job Fair 참가
- **성명** (name) - 필수
- **성별** (gender) - 필수 ✨ NEW
- **생년월일** (birth) - 필수
- **연락처** (phone) - 필수
- **이메일** (email) - 선택
- **희망 근무 지역** (region) - 선택

#### 추천인 지원
- **성명** (ref-name) - 필수
- **성별** (ref-gender) - 필수 ✨ NEW
- **생년월일** (ref-birth) - 필수
- **연락처** (ref-phone) - 필수
- **이메일** (ref-email) - 선택
- **추천인 성명** (referrer-name) - 필수
- **추천인 소속 지점** (referrer-branch) - 선택
- 등...

#### 직접 지원
- **성명** (dir-name) - 필수
- **성별** (dir-gender) - 필수 ✨ NEW
- **생년월일** (dir-birth) - 필수
- **연락처** (dir-phone) - 필수
- 등...

---

### 2. 실시간 나이 체크 기능

#### 작동 방식
1. **성별 선택** (남성/여성)
2. **생년월일 입력** (YYYY-MM-DD 형식)
3. **자동 검증** - 두 필드가 모두 입력되면 즉시 체크
4. **결과 표시** - 생년월일 입력 필드 아래에 메시지 표시

#### 검증 로직
```javascript
// 만 나이 계산
calculateAge(birthDateStr) {
    const today = new Date();
    const birthDate = new Date(birthDateStr);
    let age = today.getFullYear() - birthDate.getFullYear();
    const monthDiff = today.getMonth() - birthDate.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    
    return age;
}

// 자격 확인
checkEligibility(age, gender) {
    // 남성 기준
    if (gender === 'male') {
        if (age >= 35 && age <= 60) return '적격';
        if ((age >= 30 && age <= 34) || (age >= 61 && age <= 65)) return '비적격';
        return '위촉불가';
    }
    
    // 여성 기준
    if (gender === 'female') {
        if (age >= 30 && age <= 55) return '적격';
        if ((age >= 25 && age <= 29) || (age >= 56 && age <= 65)) return '비적격';
        return '위촉불가';
    }
}
```

---

### 3. 시각적 피드백

#### ✅ 적격 (Green)
- **배경**: #E8F5E9 (연한 초록)
- **텍스트**: #2E7D32 (진한 초록)
- **테두리**: 2px solid #4CAF50
- **메시지**: `✅ 적격 (만 XX세 - 남성/여성)`

#### ⚠️ 비적격 (Yellow/Orange)
- **배경**: #FFF9E6 (연한 노랑)
- **텍스트**: #E65100 (주황색)
- **테두리**: 2px solid #FF9800
- **메시지**: 
  ```
  ⚠️ 비적격 (만 XX세 - 남성/여성)
  ※ 지원은 가능하나 위촉 가능 여부는 별도 심사가 필요합니다.
  ```

#### ❌ 위촉불가 (Red)
- **배경**: #FFEBEE (연한 빨강)
- **텍스트**: #C62828 (진한 빨강)
- **테두리**: 2px solid #F44336
- **메시지**: 
  ```
  ❌ 위촉불가 (만 XX세 - 남성/여성)
  남성은 만 30-65세만 지원 가능합니다.
  (만 66세 이상 또는 만 29세 이하는 위촉불가)
  ```
  또는
  ```
  ❌ 위촉불가 (만 XX세 - 여성)
  여성은 만 25-65세만 지원 가능합니다.
  (만 66세 이상 또는 만 24세 이하는 위촉불가)
  ```

---

## 🎨 UI 변경 사항

### Before (v28.0)
```html
<div class="form-row">
    <div class="form-group">
        <label for="name">성명 <span class="required">*</span></label>
        <input type="text" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="birth">생년월일 <span class="required">*</span></label>
        <input type="date" id="birth" name="birth" required>
    </div>
</div>
```

### After (v29.0)
```html
<div class="form-row">
    <div class="form-group">
        <label for="name">성명 <span class="required">*</span></label>
        <input type="text" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="gender">성별 <span class="required">*</span></label>
        <select id="gender" name="gender" required>
            <option value="">선택해주세요</option>
            <option value="male">남성</option>
            <option value="female">여성</option>
        </select>
    </div>
</div>

<div class="form-row">
    <div class="form-group">
        <label for="birth">생년월일 <span class="required">*</span></label>
        <input type="date" id="birth" name="birth" required>
        <small class="field-note">나이 자격 요건 자동 확인</small>
        <!-- 여기에 검증 메시지가 동적으로 추가됨 -->
    </div>
    <div class="form-group">
        <label for="phone">연락처 <span class="required">*</span></label>
        <input type="tel" id="phone" name="phone" required>
    </div>
</div>
```

---

## 🔧 기술 구현

### JavaScript 함수 구조
```javascript
// 1. 만 나이 계산
calculateAge(birthDateStr) → number

// 2. 자격 확인
checkEligibility(age, gender) → {
    eligible: boolean,
    status: 'eligible' | 'conditional' | 'ineligible' | 'error',
    message: string
}

// 3. 초기화
initAgeValidation() {
    // Job Fair 체크 (birth + gender)
    // 추천인 지원 체크 (ref-birth + ref-gender)
    // 직접 지원 체크 (dir-birth + dir-gender)
}
```

### 이벤트 리스너
- **생년월일 입력 필드**: `change` 이벤트
- **성별 선택 필드**: `change` 이벤트
- 두 필드 중 하나라도 변경되면 → 자동 체크

---

## 📱 테스트 방법

### 테스트 URL
**QR 코드 테스트**:
```
https://8001-ig1hw6ruruwvm4u22c8u7-0e616f0a.sandbox.novita.ai/qr-test.html
```

**직접 접속** (시크릿 모드 권장):
```
https://8001-ig1hw6ruruwvm4u22c8u7-0e616f0a.sandbox.novita.ai/index.html?v=29.0&_t=1738864000
```

---

### 테스트 시나리오

#### 시나리오 1: 적격 (남성 40세)
1. 지원서 접수 섹션으로 이동
2. "Job Fair 참가" 탭 클릭
3. 성별 선택: **남성**
4. 생년월일 입력: **1986-01-01** (만 40세)
5. **예상 결과**: 
   ```
   ✅ 적격 (만 40세 - 남성)
   ```
   - 초록색 배경
   - 진한 초록색 텍스트

#### 시나리오 2: 비적격 (남성 32세)
1. 성별 선택: **남성**
2. 생년월일 입력: **1994-01-01** (만 32세)
3. **예상 결과**: 
   ```
   ⚠️ 비적격 (만 32세 - 남성)
   ※ 지원은 가능하나 위촉 가능 여부는 별도 심사가 필요합니다.
   ```
   - 노란색 배경
   - 주황색 텍스트

#### 시나리오 3: 위촉불가 (남성 28세)
1. 성별 선택: **남성**
2. 생년월일 입력: **1998-01-01** (만 28세)
3. **예상 결과**: 
   ```
   ❌ 위촉불가 (만 28세 - 남성)
   남성은 만 30-65세만 지원 가능합니다.
   (만 66세 이상 또는 만 29세 이하는 위촉불가)
   ```
   - 빨간색 배경
   - 진한 빨간색 텍스트

#### 시나리오 4: 적격 (여성 45세)
1. 성별 선택: **여성**
2. 생년월일 입력: **1981-01-01** (만 45세)
3. **예상 결과**: 
   ```
   ✅ 적격 (만 45세 - 여성)
   ```

#### 시나리오 5: 위촉불가 (여성 70세)
1. 성별 선택: **여성**
2. 생년월일 입력: **1956-01-01** (만 70세)
3. **예상 결과**: 
   ```
   ❌ 위촉불가 (만 70세 - 여성)
   여성은 만 25-65세만 지원 가능합니다.
   (만 66세 이상 또는 만 24세 이하는 위촉불가)
   ```

---

### 테스트 체크리스트

#### Job Fair 참가
- [ ] 성별 선택 필드가 보이는가?
- [ ] 성별 선택 → 생년월일 입력 → 메시지 표시
- [ ] 적격/비적격/위촉불가 색상이 정확한가?
- [ ] 메시지가 생년월일 필드 아래에 표시되는가?

#### 추천인 지원
- [ ] "추천인 지원" 탭 클릭
- [ ] 성별 선택 필드가 보이는가?
- [ ] 성별 선택 → 생년월일 입력 → 메시지 표시
- [ ] Job Fair와 독립적으로 작동하는가?

#### 직접 지원
- [ ] "직접 지원" 탭 클릭
- [ ] 성별 선택 필드가 보이는가?
- [ ] 성별 선택 → 생년월일 입력 → 메시지 표시
- [ ] 다른 탭과 독립적으로 작동하는가?

#### 콘솔 로그 확인
개발자 도구 → Console에서 확인:
```
✅ 나이 제한 체크 기능 초기화 완료
🔍 Job Fair 나이 체크: ✅ 적격 (만 40세 - 남성)
```

---

## 💡 주요 기능 특징

### 1. 실시간 검증
- 성별 또는 생년월일 변경 시 **즉시** 체크
- 페이지 새로고침 불필요
- 제출 전에 미리 확인 가능

### 2. 명확한 피드백
- **색상 코딩**: 초록(적격), 노랑(비적격), 빨강(위촉불가)
- **아이콘**: ✅, ⚠️, ❌
- **상세 설명**: 지원 가능 여부와 이유 명시

### 3. 독립 작동
- 세 가지 폼이 **완전히 독립적**으로 작동
- 한 폼의 입력이 다른 폼에 영향을 주지 않음

### 4. 접근성
- `<small class="field-note">` - "나이 자격 요건 자동 확인" 안내
- 필수 필드 표시: `<span class="required">*</span>`
- 명확한 오류 메시지

---

## 🐛 예외 처리

### 1. 성별 미선택
- 생년월일만 입력 시 → 검증 안 함
- 성별 선택 후 → 자동 검증

### 2. 생년월일 미입력
- 성별만 선택 시 → 검증 안 함
- 생년월일 입력 후 → 자동 검증

### 3. 날짜 형식 오류
- `<input type="date">` 사용으로 형식 보장
- 브라우저 기본 날짜 선택기 활용

### 4. 잘못된 날짜
- 미래 날짜 입력 시 → 음수 나이 계산
- 자동으로 "위촉불가" 처리

---

## 📊 버전 히스토리

| 버전 | 기능 | 결과 |
|------|------|------|
| v23.0 | 모바일 드롭다운 작동 | ✅ 해결 |
| v24.0 | 서브메뉴 스크롤 이동 | ✅ 해결 |
| v25.0 | 보도자료 필터 기능 | ✅ 해결 |
| v26.0 | 카드 텍스트 가독성 | ❌ 캐시 문제 |
| v27.0 | 카드 텍스트 가독성 (인라인) | ✅ 해결 |
| v28.0 | 필터 버튼 가독성 | ✅ 해결 |
| **v29.0** | **나이 제한 자동 체크** | **✅ 완료** |

---

## 💾 배포 정보

### Git Commit
```bash
Commit: 6502b71
Branch: main
Message: feat: 지원서 나이 제한 자동 체크 기능 추가 v29.0

- 세 가지 지원 폼에 성별 필드 추가 (Job Fair, 추천인, 직접)
- 생년월일 + 성별 입력 시 자동으로 지원 자격 확인
- 2026년 기준 연령 체크
- 실시간 피드백
- 만 나이 자동 계산
- 각 폼마다 독립적으로 작동
```

### 수정 파일
1. `public/index.html` - 폼 구조 변경 + JavaScript 추가
2. `public/qr-test.html` - 버전 업데이트 (v28.0 → v29.0)
3. `AGE_VALIDATION_v29.0.md` - 이 문서

---

## 🎓 교훈

### 1. 사용자 경험 최우선
- 제출 전에 미리 확인 → 불필요한 제출 방지
- 명확한 피드백 → 사용자 혼란 감소

### 2. 실시간 검증의 중요성
- 즉각적인 피드백 → 사용자 신뢰 향상
- 오류 조기 발견 → 시간 절약

### 3. 시각적 피드백
- 색상 코딩 → 직관적 이해
- 상세 메시지 → 명확한 안내

### 4. 독립적 모듈 설계
- 세 가지 폼이 독립적 → 유지보수 용이
- 재사용 가능한 함수 → 확장성

---

## 🏁 최종 결론

**v29.0은 지원서 나이 제한 자동 체크 기능이 완전히 구현되었습니다!**

✅ **완성된 기능**
1. 세 가지 지원 폼에 성별 필드 추가
2. 실시간 나이 제한 검증
3. 명확한 시각적 피드백 (초록/노랑/빨강)
4. 만 나이 자동 계산
5. 2026년 기준 연령 체크 (남성/여성 별도)
6. 독립적 작동 (폼 간 간섭 없음)

📱 **지금 바로 테스트하세요!**
1. 지원서 접수 섹션으로 이동
2. 성별 선택
3. 생년월일 입력
4. 자동으로 자격 확인 메시지 표시

🚀 **사용자 혜택**
- 지원 전에 자격 요건 미리 확인
- 불필요한 지원 방지
- 명확한 안내로 혼란 감소
- 시간 절약

---

**작성자**: Claude (AI Assistant)  
**날짜**: 2026-02-06  
**버전**: v29.0  
**상태**: ✅ 완료
